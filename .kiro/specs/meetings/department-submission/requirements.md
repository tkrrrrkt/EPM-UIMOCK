# 部門報告登録 Requirements

> **ステータス**: Phase 1 実装済み
> **作成日**: 2026-01-25
> **スコープ**: C1（報告登録）
> **対象ユーザー**: 部門担当者、事業部担当者

---

## Spec Reference

- **仕様概要（SSoT）**: [.kiro/specs/仕様概要/経営会議レポート機能.md](../../仕様概要/経営会議レポート機能.md)
- **仕様検討**: [.kiro/specs/仕様検討/20260115_経営会議レポート機能.md](../../仕様検討/20260115_経営会議レポート機能.md)
- **v0プロンプト**: [.kiro/specs/仕様検討/20260115_経営会議レポート機能_v0プロンプト.md](../../仕様検討/20260115_経営会議レポート機能_v0プロンプト.md)

---

## Functional Requirements

### FR-1: 報告登録画面（C1）

| ID | 要件 | 優先度 | ステータス |
|----|------|--------|------------|
| FR-1.1 | 会議情報（会議名、対象月、締切日）を表示する | P1 | ✅ 実装済み |
| FR-1.2 | 部門情報（部門名、ステータス）を表示する | P1 | ✅ 実装済み |
| FR-1.3 | セクション別のフォームを表示する | P1 | ✅ 実装済み |
| FR-1.4 | テキスト入力項目を入力できる | P1 | ✅ 実装済み |
| FR-1.5 | リッチテキスト入力項目を入力できる | P1 | ✅ 実装済み |
| FR-1.6 | 数値入力項目を入力できる | P1 | ✅ 実装済み |
| FR-1.7 | 下書き保存ができる | P1 | ✅ 実装済み |
| FR-1.8 | 提出ができる | P1 | ✅ 実装済み |
| FR-1.9 | 必須項目の未入力時にエラー表示する | P1 | ✅ 実装済み |
| FR-1.10 | 提出確認ダイアログを表示する | P1 | ✅ 実装済み |
| FR-1.11 | 未保存の変更がある場合、離脱確認を表示する | P1 | ✅ 実装済み |

---

### FR-2: フォームセクション（標準テンプレート）

| セクション | 項目 | 入力タイプ | 必須 |
|------------|------|------------|------|
| 概要 | 当月ハイライト | RICH_TEXT | ○ |
| 概要 | 課題・リスク | RICH_TEXT | ○ |
| 施策 | アクションプラン | RICH_TEXT | - |
| 見通し | 見通しコメント | TEXT | - |

**注**: フォームセクション・項目は `meeting_form_sections` / `meeting_form_fields` で定義され、動的に取得される。上記は標準テンプレートの例。

---

### FR-3: 見通し入力（Phase 2）

| ID | 要件 | 優先度 | ステータス |
|----|------|--------|------------|
| FR-3.1 | 見通しをSELECT形式で入力できる（好調/計画通り/懸念/要対策） | P2 | 未実装 |
| FR-3.2 | 見通しバッジの色分け表示 | P2 | 未実装 |

---

### FR-4: 添付ファイル（Phase 2）

| ID | 要件 | 優先度 | ステータス |
|----|------|--------|------------|
| FR-4.1 | 添付ファイルをアップロードできる | P2 | 未実装 |
| FR-4.2 | アップロード済みファイルを削除できる | P2 | 未実装 |

---

## Non-Functional Requirements

### NFR-1: セキュリティ

| ID | 要件 |
|----|------|
| NFR-1.1 | UIはBFF経由でのみデータを取得する |
| NFR-1.2 | tenant_idによるマルチテナント分離 |
| NFR-1.3 | 自部門の報告のみ編集可能（権限制御） |

### NFR-2: UI/UX

| ID | 要件 |
|----|------|
| NFR-2.1 | デザインシステム（epm-design-system.md）に準拠 |
| NFR-2.2 | UIパターン定義（フォームパターン）に準拠 |
| NFR-2.3 | 自動保存インジケータの表示（Phase 2） |
| NFR-2.4 | ローディング状態を表示 |
| NFR-2.5 | 提出後は編集不可を明示 |

### NFR-3: 開発ガイドライン

| ID | 要件 |
|----|------|
| NFR-3.1 | CCSDD（Contracts-first）に準拠 |
| NFR-3.2 | v0生成UIは`_v0_drop`に隔離 |
| NFR-3.3 | BffClientパターンを使用 |

---

## Out of Scope（本Spec対象外）

以下は別Specで管理：

| 機能 | 対象Spec |
|------|----------|
| 会議イベント管理（B1, B2） | `meeting-event-management/` |
| レポート閲覧（D1, D2） | `meeting-report-view/` |
| 報告登録（事業部用）（C2） | Phase 2で拡張 |
| 報告確認（C3） | Phase 2 |

---

## Glossary

| 用語 | 説明 |
|------|------|
| 部門報告 | 各部門が会議に向けて登録する報告内容 |
| 提出ステータス | NOT_STARTED（未着手）→ DRAFT（作成中）→ SUBMITTED（提出済） |
| セクション | フォームの論理的なグループ（概要、施策、見通し等） |
| 見通し | 売上/利益の達成見込み（好調/計画通り/懸念/要対策） |

---

## 変更履歴

| 日付 | 変更内容 |
|------|----------|
| 2026-01-25 | 初版作成（Phase 1スコープ） |
| 2026-01-25 | Spec分割により独立化 |
